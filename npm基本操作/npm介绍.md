# npm 介绍

npm 全名是 Node Package Manager, 一开始是用来管理 Node 的第三方包的, 随着前端工程化的演进, npm 不在仅限于 node, 而是应用于整个 JS

npm 现在是 JavaScript 包管理工具

## npm 如何下载和管理包

> npm install

> 更为详细的查看 `npm help install`

安装之前, 会先检查 `node_modules` 目录中是否存在这个包, 如果存在则不再安装, 即使远程仓库已经有了一个新版本

**版本查询**
npm 需要查询查询要下载的版本存不存在, 以及这个版本的下载位置.
通过 npm 模块仓库提供的查询服务实现 `https://registry.npmjs.org/` 后面接上包名就能查询到这个包的全部版本信息

> `npm v 包名[@版本]` 同样也能查询到这个包的信息(比较精简的信息)

**包下载**
包下载有两个参数 `--save` 和 `--save-dev`

- `--save` 也是默认的, 这中方式下载的包会存入 `dependencies` 中, 用于生产环境所需的安装包
- `--save-dev` | `-D`, 这种方式下载的包会存入 `devDependencies` 中, 用于开发环境所需的安装包

> 实现项目中, 这两个中下载方式并没有区别(使用上), 主要在 npm 包开发的时候会有区别. 包中如果指定某个包是开发环境, 则这个包在开发好后上传 npm 后, 别人下载时 npm 不会去下载包中开发环境所依赖的包

**缓存目录**
所有下载的包都存放在本地缓存目录中, 这个目录通过`npm config get cache` 可以查看到

> `npm cache ls [包名]` 可以查看所有缓存或单独包的缓存数据

**解压缩下载的包到项目的 node_modules 目录**

注意，一个模块安装以后，本地其实保存了两份。一份是缓存目录下的压缩包，另一份是 node_modules 目录下解压后的代码。

但是，运行 npm install 的时候，只会检查 node_modules 目录，而不会检查缓存目录。也就是说，如果一个模块在缓存目录下有压缩包，但是没有安装在 node_modules 目录中，npm 依然会从远程仓库下载一次新的压缩包。

> 关于这个缓存问题, 存在一些解决方案

### 在项目中管理包

这里需要先说一下 npm 包版本的划分 `[major, minor, patch](主版本号.次版本号.修订好`

例如 `"vue": "^2.6.10"`

- `^` 表示安装最新`次版本号`
- `~` 表示安装最新的`修订版本号` (这个见的比较少)

在项目中通过 `package.json` 来控制包依赖及版本

> npm init 可以初始化 package.json 文件

`package-lock.json` 是用来锁定依赖的具体版本, 实现在所有环境下项目版本完全一致

### 全局安装

> npm i xxx -g

这种安装方式后可以让你在任何目录下使用这个包。

### 卸载

`npm uninstall [-D] [-g] 包名`


