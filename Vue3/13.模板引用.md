# 模板引用

通过给组件绑定`ref`属性, 可以直接访问到底层 DOM.

- 对于普通组件, 获取的 DOM

- 对于 Vue 组件, 获取的式组件实例

## v-for 中的 ref

此时通过 `this.$refs` 获取的会是一个数组

> 注意: 这个数组不保证和 DOM 顺序一致 (这个应该式获取 DOM 的 API 造成的)

## ref 使用时机

无法在组件还没有渲染(挂载)的时候获取 `ref`

`ref`也不是响应式的

## ref 绑定函数

`ref` 还可以绑定函数, 会在每次组件更新时都被调用, 函数的第一个参数会是当前 DOM

```html
<input :ref="(el) => { /* 将 el 赋值给一个数据属性或 ref 变量 */ }" />
```

## 组件中控制 ref 的访问权限

对于 Vue 组件, ref 获取的是组件实例, 这时通过`ref`可以控制整个组件.

通过在 ref 中配置`expose`可以限制组件实例的访问:

```js
export default {
  expose: ['publicData', 'publicMethod'],
  data() {
    return {
      publicData: 'foo',
      privateData: 'bar',
    };
  },
  methods: {
    publicMethod() {
      /* ... */
    },
    privateMethod() {
      /* ... */
    },
  },
};
```

通过 `ref` 只能访问`publicData` 和 `publicMethod`

> 这是Vue2不存在的