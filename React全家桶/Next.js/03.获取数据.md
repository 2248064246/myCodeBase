# 获取数据

- `getStaticProps` 用于静态生成, 在构建时生成数据
- `getStaticPaths` 用于静态生成, 生成动态路由
- `getServerSideProps` 用于服务端渲染获取数据

## getStaticProps

```js
export async function getStaticProps(context) {
  return {
    // 返回这个props将被作为组件的props参数传入
    props: {}, // will be passed to the page component as props
  };
}
```

`context` 对象包含下列属性:

- `params` 包含动态路由的页面的路由参数, 一般来说是类如 `{id: xxx}` 这种.(如果页面名称是`[id].js`)
- `preview` 为`true`表示页面处于预览模式.
- `previewData` 包含由设置的预览数据`setPreviewData`
- `locale` 包含语言环境
- `locales` 包含所有受支持的语言环境(如果启用了国际化路由)
- `defaultLocale` 包含配置的默认语言环境

`getStaticProps` 应该返回一个对象

- `props` 一个可选对象, 将返回格页面组件
- `revalidate`
- `notFound` 一个可选布尔值, 允许页面返回 404 状态和页面

  ```js
  export async function getStaticProps(context) {
    const res = await fetch(`https://.../data`);
    const data = await res.json();

    if (!data) {
      return {
        notFound: true,
      };
    }

    return {
      props: { data }, // will be passed to the page component as props
    };
  }
  ```

- `redirect` 一个可选的重定向值, 允许重定向到内部和外部资源. 应该使用如下对象形式`{destination: string, permanent: boolean}

  ```js
  export async function getStaticProps(context) {
    const res = await fetch(`https://...`);
    const data = await res.json();

    if (!data) {
      return {
        redirect: {
          destination: '/',
          permanent: false,
        },
      };
    }

    return {
      props: { data }, // will be passed to the page component as props
    };
  }
  ```

###  增量静态再生