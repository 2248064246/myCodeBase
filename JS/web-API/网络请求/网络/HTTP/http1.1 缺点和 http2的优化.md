# http1.1 与 http2

http1.1 中的持久连接 `keep-alive` 是默认行为, 这个特性可以使得请求完成之后, 对应的tcp连接在一定时间内不会被关闭, 而是可以供后续的请求继续使用.

队头阻塞问题: 

多个请求使用同一个tcp连接后, 这些请求需要排队, 之后前一个请求响应成功后, 后面的请求才能发送和响应

http1.1 有一个管道化连接处理: 后面的请求不用等待前面的请求响应, 就可以先发送 (但是后续的请求响应还是需要)

chrome中页面对应域名只能建立6个持久连接

使用域名分片, 我们把这些资源放到多个域名下, 每个域名都可以有6个持久连接, 这样就能开启更多的tcp连接, 加快资源获取速度
## HTTP2

头部压缩:

http1.1 中请求头采用文本格式, 每次都会发送很多之前重复的字段

http2.0 中的优化: 将常见的头信息用静态表的新式在服务端和客户端维护, 客户端发送静态表中的index就可以(类似这么个东西)

(好像还会减少重复标头的发送)

这样就达到了减少头部信息的目的;


帧:

头信息帧和数据帧

http2 将请求数据拆分为头信息帧和数据帧

http2 中只会建立一个tcp 连接, 但是消息的发送不会排队, 而是交替发送帧信息, 服务器拿到头信息帧和数据帧后再把它们组合起来.

多路复用: 

就是基于 http 帧的概念, 将请求封装为帧, 然后将多个帧同时加入tcp连接中.