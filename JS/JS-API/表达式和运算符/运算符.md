# 运算符

## 赋值运算符

- **赋值 `=`**
- **加法赋值 `+=`**
- **减法赋值 `-=`**
- **乘法赋值 `*=`**
- **除法赋值 `/=`**
- **求余赋值 `%=`**
- **求幂赋值 \*\*=**
- **左移位赋值 `<<=`**
- **右移位赋值 `>>=`**
- **按位或赋值 `|=`**
- **按位与赋值 `&=`**
- **按位异或赋值 `^=`**
- **逻辑空赋值 `??=`**
- **逻辑和赋值 `&&=`**
- **逻辑或赋值 `||=`**

## 算数运算符

- `+ - * / %`
- `**` 指数运算符

## 位运算符

- `&`
- `|`
- `~`
- `^`
- 右移位 `>>`
- 左移位 `<<`
- 无符号右移位 `>>>`

> Note: JS 的中位运算只支持 32 位数值, 超过 32 位的值会只截取 32 位的部分

**位运算的一些小操作**

- 通过 `^` 完成交换

  > 原理是 一个数异或两个相同的数不变(两个相等的数异或为 0, 一个数和 0 异或是自己本身)

  ```js
  let a = 7;
  let b = 1;
  a ^= b;
  b ^= a;
  a ^= b;
  ```

  这个原理还可用来计算数组中只出现一次的值

  ```js
  [1, 2, 3, 2, 1].reduce((r, c) => (r ^= c));
  ```

- 取整(向下取整)

  ```js
  ~~1.23;
  1.23 | 0;
  1.23 >> 0;
  ```

- 判断是否为 2 的整数幂

  ```js
  n & (n - 1 === 0); // 应为如果是2的整数幂, 其值减一后 & 原来值刚好为 0
  ```

- 奇偶性判断

  > 二进制特性: 第一个数是 1 就是奇数, 是 0 就是偶数

  ```js
  n & 1; // 为 1 是奇数, 为 0 是偶数
  ```

- 快速计算 2 的次方

  ```js
  1 << n;
  1 << 10; // 1024
  ```

- 判断两个数符号是否相同

  ```js
  if (a ^ (b >= 0)) 符号相同;
  else 符号不相同;
  ```

## 逻辑运算符

- `&&` 逻辑和
- `||` 逻辑或
- `??` 逻辑空
- `!` 逻辑非

`&&` 只有在前面的操作真时才会执行后面的操作

`??` 只有前面的操作数为`空值(null or undefiend)` 时才会执行后面的操作

> Note : 这些运算符都有返回值

```js
let a = true && false; // a ==> false

let b = true || false; // a => true
```

## 字符串运算符

- `+`

## 条件(三元)运算符

- `? :`

## 逗号运算符

- `,`

## 一元运算符

- `++`
- `--`
- `+` 一元加运算
- `-` 一元减运算
- `~` 按位非
- `!` 逻辑非

## 关系运算符

- `>`
- `<`
- `==`
- `===`
- `>=`
- `<=`
- `!=`
- `!==`

## 运算符的优先级和结合性

结合性: 相同优先级的运算符的执行顺序

例如:
加法运算符`+`结合性是从左到右, 那么`a+b+c` 等同 `(a+b)+c`.

指数运算符`**`结合性是从右到左, 那么`a**b**c` 等同`a**(b**c)`.

**以下优先级从高到低排列**

| 描述           | 运算符                 | 结合性       |
| -------------- | ---------------------- | ------------ | -------- | -------- |
| 分组           | `()`                   | N/A(不相关)  |
| 成员访问       | `.` `?.` `[...]`       | 从左到右     |
| 自增/自减      | `++` `--`              | N/A          |
| 逻辑非/按位非  | `!` `~`                | 从左到右     |
| 一元加/减      | `+...` `-...`          | 从左到右     |
| 指数运算       | `**`                   | ==从右到左== |
| 乘法/除法/取余 | `*` `/` `%`            | 从左到右     |
| 加法/减法      | `...+...` `...-...`    | 从左到右     |
| 按位左/右移    | `<<` `>>` `>>>`        | 从左到右     |
| 关系运算符     | `>` `<` `>=` `<=`      | 从左到右     |
| 关系运算符     | `==` `!=` `====` `!==` | 从左到右     |
| 按位与         | `&`                    | 从左到右     |
| 按位异或       | `^`                    | 从左到右     |
| 按位或         | `                      | `            | 从左到右 |
| 逻辑与         | `&&`                   | 从左到右     |
| 逻辑或         | `                      |              | `        | 从左到右 |
| 空值合并       | `??`                   | 从左到右     |
| 三元运算符     | `? :`                  | ==从右到左== |
| 赋值           | `=` `+=` `-=` `等等..` | ==从右到左== |
| 逗号           | `,`                    | 从左到右     |

> Note 1: 后置++/-- 会先把当前值返回表达式然后在自增/自减
