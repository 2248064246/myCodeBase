# 循环优劣比较

> `for` `for(逆序)` `forEach` `for...of` `for...in`

+ 先说结论(基于超大数据)
  + `for(逆序)` 是最快的
  + `for`其次
  + 其余的差不多

+ 个人看法
 + > 在项目中应该就代码 `易读性`, `易维护性`, `美观性`, `兼容性` 性来选择
 + > 在实现功能的前提下选择性能更好的

+ `for(逆序)`为什么会是最快
  + 正序遍历需要对比当前索引和数组长度, 转化为布尔值, 在判断循环结束条件
  + `for(逆序)`的正确写法 `for (let i=arr.length;i;i--){}`, 结束循环直接判断i的真假, 所以在这里节省了时间

+ `v8`引擎对循环做了一个优化
  + 在以前都提倡将 `arr.length` 提出来用一个变量存着, 这样避免在循环的时候每次都要读取数组的`length`属性
  + `v8`中对这个做了优化, 会在编译器中实现上面的步骤

> 访问数据的值和判断数据真假有性能区别
  + `js`基于原型的继承, 要访问对象上的属性, 需要遍历原型链

> 关于优化

+ 优化需要针对性, 是针对某一平台, 某一算法, 某一版本, 某一时期
+ 没有一劳永逸的优化

> 关于 new Array
+ `new Array` 生成的是`稀疏数组`, `forEach`在循环稀疏数组时会有优化--就会不会循环这个数组...