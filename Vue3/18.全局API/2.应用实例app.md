# 应用实例 API

## createApp()

创建一个应用实例

## createSSRApp()

创建 SSR 模式的应用实例(和 createApp() 用法完全一致)

## app.mount()

将应用挂载在一个容器元素中

```ts
interface App {
  mount(rootContainer: Element | string): ComponentPublicInstance;
}
```

`String`类型时需要是`css选择器` (这里 Vue2 是 ID 选择器)

## app.unmount()

卸载一个已挂载的应用实例. 卸载一个应用会触发该应用组件树内所有组件的卸载声明周期钩子

## app.provide()

提供一个应用级别的注入

```ts
interface App {
  provide<T>(key: InjectionKey<T> | symbol | string, value: T): this;
}
```

第一个参数是 key(字符串或 symbol), 第二个是值

## app.component()

注册/得到 一个应用层的组件

```js
import { createApp } from 'vue';

const app = createApp({});

// 注册一个选项对象
app.component('my-component', {
  /* ... */
});

// 得到一个已注册的组件
const MyComponent = app.component('my-component');
```

## app.directive

注册/得到 一个全局指令

```js
import { createApp } from 'vue';

const app = createApp({
  /* ... */
});

// 注册（对象形式的指令）
app.directive('my-directive', {
  /* 自定义指令钩子 */
});

// 注册（函数形式的指令）
app.directive('my-directive', () => {
  /* ... */
});

// 得到一个已注册的指令
const myDirective = app.directive('my-directive');
```

## app.use()

注册一个插件

## app.mixin()

Vue3 中不推荐使用`mixins`了`, 保留只是为了向后兼容

## app.version

## app.config

每个应用实例都会暴露一个 config 对象，其中包含了对这个应用的配置设定。你可以在挂载应用前更改这些属性

### app.config.errorhandler

为应用内抛出的未捕获错误指定一个全局处理函数

```ts
interface AppConfig {
  errorHandler?: (
    err: unknown,
    instance: ComponentPublicInstance | null,
    // `info` 是一个 Vue 特定的错误信息
    // 例如：错误是在哪个生命周期的钩子上抛出的
    info: string
  ) => void;
}
```

- err: 错误信息
- instance: 出发错误的组件实例
- info: 指出错误来源信息的字符串(例如是在哪个生命周期钩子上抛出的)

可以从以下捕获信息:

- 事件处理器
- 生命周期钩子
- setup() 函数
- 侦听器
- 自定义指令钩子
- 过度(transition)钩子
- 组件渲染器

## app.config.warnHandler

```ts
interface AppConfig {
  warnHandler?: (
    msg: string,
    instance: ComponentPublicInstance | null,
    trace: string
  ) => void;
}
```

这个和`errorHandler` 一样, `trance`是代表组件追踪字符串

> 警告只会在开发阶段显示, 在生成环境这个配置会直接移除

## app.config.performance

设置此选项为 `true` 可以在浏览器开发工具`性能/时间线`页中启用对组件初始化,编译,渲染和修补的性能表现追踪

只在开发模式和支持`performance.mark` API 的浏览器中工作


## app.config.compilerOptions

配置vue编译器选项

只适用于完整构建版本的`vue`

如果使用webpack 或 vite 需要通过 `vue-loader` 或 `@vite/plugin-vue` 来进行配置


