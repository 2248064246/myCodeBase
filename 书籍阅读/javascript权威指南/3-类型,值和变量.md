
# ç±»å‹, å€¼ å’Œå˜é‡

## æ•°å€¼

JS ä½¿ç”¨ IEEE 754 æ ‡å‡†å®šä¹‰ 64 ä½æµ®ç‚¹æ ¼å¼è¡¨ç¤ºæ•°å€¼ (åœ¨è¡¨ç¤ºæµ®ç‚¹æ•°çš„æ—¶å€™ä¼šæœ‰é—®é¢˜)

### æŒ‡æ•°è®¡æ•°æ³•

```js
1.4E2 // => 142

```

### æ•°å­—å­—é¢é‡ä¸­çš„åˆ†éš”ç¬¦

åœ¨ ES2020 ä¹‹å, å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿å°†æ•°å­—å­—é¢é‡åˆ†éš”ä¸ºæ›´å®¹æ˜“çœ‹æ¸…çš„æ•°å­—æ®µ

```js
let num = 1_000_000_001 // => 1000000001
let num2 = 1_1_1_01 // => 11101

```

### ç®—æœ¯

JS ä¸­çš„ç®—æœ¯é‡åˆ° ä¸Šæº¢å‡º, ä¸‹æº¢å‡º, é™¤ä»¥0 æ—¶, ä¸ä¼šå‘ç”Ÿé”™è¯¯

åœ¨æ•°å€¼è¶…è¿‡æœ€å¤§å¯è¡¨ç¤ºæ•°æ—¶, ç»“æœæ˜¯ä¸€ä¸ª `Infinity` æ— ç©·å€¼

åŒæ ·, å¦‚æœæ˜¯ä¸ªè´Ÿå€¼, ç»“æœæ˜¯ `-Infinity`

JS ä¸­ ä¸‹æº¢å‡ºä¼šè¡¨ç¤ºä¸º 0, æˆ–è€…`-0`

### äºŒè¿›åˆ¶æµ®ç‚¹æ•°ä¸èˆå…¥é”™è¯¯

IEEE 754 æ˜¯ä¸€ç§äºŒè¿›åˆ¶è¡¨ç¤ºæ³•, å¯ä»¥ç²¾ç¡®è¡¨ç¤º 1/2, 1/8 è¿™ç§åˆ†æ•°

æ— æ³•å‡†ç¡®è¡¨ç¤ºåè¿›åˆ¶åˆ†æ•°(ä¾‹å¦‚: 0.1)

### é€šè¿‡ BigInt è¡¨ç¤ºä»»æ„ç²¾åº¦æ•´æ•°

ES2020 å®šä¹‰çš„æ–°æ•°æ®ç±»å‹

ä¸»è¦ä¸ºäº†è¡¨ç¤º 64ä½æ•´æ•°(ä¸é€‚åˆåŠ å¯†, æ²¡æœ‰è€ƒè™‘é˜²æ­¢æ—¶åºæ”»å‡»??)

+ æ—¶åºæ”»å‡»
  `æŸä¸ªå‡½æ•°è´Ÿè´£æ¯”è¾ƒç”¨æˆ·è¾“å…¥çš„å¯†ç å’Œå­˜æ”¾åœ¨ç³»ç»Ÿå†…å¯†ç æ˜¯å¦ç›¸åŒï¼Œå¦‚æœè¯¥å‡½æ•°æ˜¯ä»ç¬¬ä¸€ä½å¼€å§‹æ¯”è¾ƒï¼Œå‘ç°ä¸åŒå°±ç«‹å³è¿”å›ï¼Œé‚£ä¹ˆé€šè¿‡è®¡ç®—è¿”å›çš„é€Ÿåº¦å°±çŸ¥é“äº†å¤§æ¦‚æ˜¯å“ªä¸€ä½å¼€å§‹ä¸åŒçš„`

```js
1234n
0b11110n // => äºŒè¿›åˆ¶BigInt => 30n
0o777n // => 8è¿›åˆ¶BigInt => 511n
0xabn // => 16è¿›åˆ¶BigInt => 171n
```

## æ–‡æœ¬

å­—ç¬¦ä¸²æ˜¯16ä½å€¼çš„ä¸å¯ä¿®æ”¹çš„æœ‰åºåºåˆ—, æ¯ä¸ªå€¼éƒ½è¡¨ç¤ºä¸€ä¸ª Unicode å­—ç¬¦, length åŒ…å«çš„16ä½å€¼çš„ä¸ªæ•°

### å­—ç¬¦, ç ç‚¹å’Œ JSå­—ç¬¦ä¸²

JS ä½¿ç”¨çš„ Unicode ä½¿ç”¨çš„æ˜¯ UTF-16 ç¼–ç çš„

æœ€å¸¸ç”¨çš„ Unicode å­—ç¬¦çš„ç ç‚¹æ˜¯16ä½çš„, å¦‚æœè¶…å‡º16ä½, åˆ™ç¼–ç ä¸ºä¸¤ä¸ª16ä½åºåˆ—

**æ„å‘³ç€, å­˜åœ¨ä¸€ä¸ªé•¿åº¦ä¸º2çš„å­—ç¬¦ä¸², ä½†æ˜¯åªæ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦**

```js
let c = 'â¤ï¸ğŸ˜‚' // c.length == 4

// jså­—ç¬¦ä¸²æ“ä½œæ–¹æ³•ä¸€èˆ¬æ˜¯æ“ä½œ 16ä½å€¼, è€Œä¸æ˜¯å­—ç¬¦
c[0]  // "â¤"
c[1] // ''

// ES6 ä»¥å, å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è¿­ä»£, ä½¿ç”¨ for/of æˆ–è€… ...æ“ä½œç¬¦, è¿­ä»£çš„æ˜¯å­—ç¬¦, è€Œä¸æ˜¯16ä½å€¼ (è¿™å¥è¯æœ‰ç‚¹ä¸å¤§é€‚ç”¨, æœ‰é—®é¢˜å•Š...)

for(const value of c) {
  console.log(value) // => 'â¤', '', 'ğŸ˜‚'
}
```

å¦‚ä½•åªé€šè¿‡å­—ç¬¦æ¥åˆ¤æ–­è¡¨æƒ…å­—ç¬¦é•¿åº¦?? (ä¸€ç§æ–¹æ³•æ˜¯, å°†å­—ç¬¦å­˜å…¥æ•°ç»„, ä½†æ˜¯å…³é”®ç‚¹åœ¨äºå¦‚ä½•æ­£ç¡®æˆªå–åˆ°å­—ç¬¦)

> stringz è¿™ä¸ªç¬¬ä¸‰æ–¹åº“å¯ä»¥å®Œç¾å®ç°é•¿åº¦, è£å‰ª, æ•°ç»„åŒ–ç­‰æ–¹æ³• (https://www.npmjs.com/package/stringz)

```js
let rsAstralRange = '\\ud800-\\udfff',
  rsZWJ = '\\u200d',
  rsVarRange = '\\ufe0e\\ufe0f',
  rsComboMarksRange = '\\u0300-\\u036f',
  reComboHalfMarksRange = '\\ufe20-\\ufe2f',
  rsComboSymbolsRange = '\\u20d0-\\u20ff',
  rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;
let reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange + rsComboRange + rsVarRange + ']');

let rsFitz = '\\ud83c[\\udffb-\\udfff]',
  rsOptVar = '[' + rsVarRange + ']?',
  rsCombo = '[' + rsComboRange + ']',
  rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',
  reOptMod = rsModifier + '?',
  rsAstral = '[' + rsAstralRange + ']',
  rsNonAstral = '[^' + rsAstralRange + ']',
  rsRegional = '(?:\\ud83c[\\udde6-\\uddff]){2}',
  rsSurrPair = '[\\ud800-\\udbff][\\udc00-\\udfff]',
  rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',
  rsSeq = rsOptVar + reOptMod + rsOptJoin,
  rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';
let reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');

function toArray(val) { // å­—ç¬¦ä¸²è½¬æˆæ•°ç»„
  return hasUnicode(val) ?
    unicodeToArray(val) :
    asciiToArray(val);
}

function hasUnicode(val) {
  return reHasUnicode.test(val);
}

function unicodeToArray(val) {
  return val.match(reUnicode) || [];
}

function asciiToArray(val) {
  return val.split('');
}
```

## ç¬¦å· Symbol

ç¬¦å·æ— æ³•é€šè¿‡å­—é¢é‡åˆ›å»º, åªèƒ½é€šè¿‡ Symbol() | Symbol.for() æ”¾å›

Symbol(name) æ°¸è¿œä¸ä¼šè¿”å›ç›¸åŒçš„ ç¬¦å·, å³ä½¿ä¼ å…¥çš„å‚æ•°ç›¸åŒ

Symbol.for(name) ç”¨æ¥æ³¨å†Œå…¨å±€ç¬¦å·, å¦‚æœä¼ å…¥å·²æœ‰çš„å‚æ•°, åˆ™è¿”å›åŸæ¥çš„ç¬¦å·, å¦åˆ™åˆ›å»ºæ–°çš„å…¨å±€ç¬¦å·

Symbol.keyFor(symbol) è¿”å›è¯¥ç¬¦å·çš„name

## å…¨å±€å˜é‡

åœ¨ æµè§ˆå™¨ç¯å¢ƒæ˜¯ window

åœ¨ Node æ˜¯ global

ES2020æœ€ç»ˆå®šä¹‰äº† `globalThis` ä½œä¸ºåœ¨ä»»ä½•ä¸Šä¸‹æ–‡ä¸­å¼•ç”¨å…¨å±€å¯¹è±¡çš„æ ‡å‡†æ–¹å¼


## ä¸å¯ä¿®æ”¹çš„åŸå§‹å€¼, ä¸å¯ä¿®æ”¹çš„å¯¹è±¡å¼•ç”¨

+ åŸå§‹å€¼æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„
+ åŸå§‹å€¼æ˜¯æŒ‰å€¼æ¯”è¾ƒ
+ å¯¹è±¡(å¼•ç”¨ç±»å‹)å¯ä»¥ä¿®æ”¹, å¯¹è±¡çš„æ¯”è¾ƒä¹Ÿä¸æ˜¯æŒ‰å€¼åˆ¤æ–­
  + ä¸¤ä¸ªå¼•ç”¨å¯¹è±¡, å½“ä¸”ä»…å½“ä»–ä»¬çš„å¼•ç”¨åŒä¸€ä¸ªåº•å±‚å¯¹è±¡æ—¶(å³å¼•ç”¨åœ°å€), æ‰ç›¸ç­‰


## ç±»å‹è½¬æ¢

### å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢

JS å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢çš„å¤æ‚æ€§, ä¸»è¦æ˜¯ç”±äºæŸäº›å¯¹è±¡ç±»å‹ä¸æ­¢ä¸€ç§åŸå§‹å€¼çš„è¡¨ç¤º

JS è§„èŒƒå®šä¹‰äº†ä¸‰ç§å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢ç®—æ³•
  + åå­—ç¬¦ä¸²
    + é¦–å…ˆå°è¯• toString() æ–¹æ³•, å¦‚æœè¿™ä¸ªæ–¹æ³•ä¸èƒ½è¿”å›åŸå§‹å€¼, åˆ™ä½¿ç”¨ valueOf() æ–¹æ³•, å¦‚æœä¹Ÿä¸è¡Œ, åˆ™æŠ›å‡ºé”™è¯¯
  + åæ•°å€¼
    + å…ˆå°è¯• valueOf(), å†å°è¯•toString()
  + æ— åå¥½
    + ç”±ç±»å®šä¹‰è‡ªå·±çš„è½¬æ¢è§„åˆ™
    + JSå†…ç½®ç±»å‹, é™¤äº†Dateç±»å®ç°åå­—ç¬¦ä¸², å…¶ä½™éƒ½æ˜¯åæ•°å€¼

ValueOf() å’Œ toString()
  + æ‰€æœ‰å¯¹è±¡éƒ½ä¼šç»§æ‰¿è¿™ä¸¤ä¸ªæ–¹æ³•
  + toString() æ”¾å›è¿™ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤º, ä¸€èˆ¬æ¯ç§ç±»éƒ½ä¼šæœ‰è‡ªå·±çš„toString() æ–¹æ³•
  + valueOf() è¿”å›å¯¹è±¡æœ¬èº«(æœ‰ä¸€äº›å¯¹è±¡ä¹Ÿå®šä¹‰äº†è‡ªå·±çš„valueOf()æ–¹æ³•, ä¾‹å¦‚ Date)

æ“ä½œç¬¦è½¬æ¢ç‰¹ä¾‹
  + '+' æ“ä½œç¬¦
    + å¦‚æœæ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡, ä¼šä½¿ç”¨æ— åå¥½ç®—æ³•å°†å¯¹è±¡è½¬ä¸ºåŸå§‹å€¼
    + å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯åŸå§‹å€¼, ä¼šå…ˆæ£€æŸ¥ä»–ä»¬çš„æ•°æ®ç±»å‹
    + å¦‚æœæœ‰ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸², åˆ™æŠŠå¦å¤–ä¸€ä¸ªä¹Ÿè½¬ä¸ºå­—ç¬¦ä¸²
    + å¦åˆ™æŠŠä¸¤ä¸ªæ•°éƒ½è½¬ä¸ºæ•°å€¼
  + æ¯”è¾ƒæ“ä½œç¬¦ >= = <=
    + ä¼šä½¿ç”¨åæ•°å€¼çš„ç®—æ³•å°†å¯¹è±¡è½¬ä¸ºåŸå§‹å€¼
  + ++ å’Œ +=
    + ++ æ“ä½œç¬¦ä¼šå°†æ•°æ®ç±»å‹è½¬ä¸ºæ•°å€¼, è¿›è¡Œæ•°å€¼è¿ç®—
    + += å’Œ + æ“ä½œç¬¦ä¸€è‡´
  + -, *, / æ“ä½œç¬¦
    + è¿™äº›æ“ä½œç¬¦éƒ½æ˜¯è¿›è¡Œæ•°å€¼è¿ç®—, éƒ½è¦è½¬ä¸ºæ•°å€¼

ä¾‹å¦‚: æ•°ç»„åˆ°æ•°å€¼çš„è½¬æ¢
åæ•°å€¼ç®—æ³•å…ˆå°è¯•valueOf(), å°† toString() å¤‡ç”¨. Array ç»§æ‰¿äº†é»˜è®¤çš„valueOf() æ–¹æ³•, ä¸è¿”å›åŸå§‹å€¼, å› æ­¤ä½¿ç”¨ toString().

```js
let a = [1, 2]

a.valueOf = function () {return 3}

a + 1 // => 4

```

## å˜é‡å£°æ˜ä¸èµ‹å€¼

### var let const

const å£°æ˜çš„å¸¸é‡å»ºè®®ç»Ÿä¸€ä½¿ç”¨å¤§å†™, å·²åŒºåˆ«å˜é‡


### å—çº§ä½œç”¨åŸŸ

let å’Œ var çš„åŒºåˆ«

+ é€šè¿‡ var å£°æ˜çš„å…¨å±€å˜é‡å¯ä»¥é€šè¿‡ window | globalThis è·å–ï¼Œ è€Œ let ä¸è¡Œ
+ æ— æ³•é€šè¿‡`delete` åˆ é™¤varå£°æ˜çš„å…¨å±€å˜é‡
+ var å¯ä»¥å¤šæ¬¡å£°æ˜åŒä¸€ä¸ªå˜é‡
+ var å£°æ˜çš„å˜é‡å…·æœ‰å˜é‡æå‡ç‰¹æ€§, è¿™ä¹Ÿæ˜¯letè¦çº æ­£çš„æœ€é‡è¦ç‰¹æ€§

å­˜åœ¨ä¸€ç§ç‰¹æ®Šæƒ…å†µ, å˜é‡æ²¡æœ‰é€šè¿‡var æˆ–è€… let å…³é”®å­—å£°æ˜, åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹, è¿™å¹¶ä¸ä¼šæŠ¥é”™, è€Œæ˜¯ä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡

ä½†æ˜¯è¿™ä¸ªå…¨å±€å˜é‡, å¯ä»¥é€šè¿‡ `delete` åˆ é™¤ (**çœŸçš„æ˜¯ç¦»è°±**)


## è§£æ„èµ‹å€¼

è§£æ„ä¸­çš„å‰©ä½™å‚æ•°

```js
  let [x, ...y] = [1,2,3,4]
```

åµŒå¥—
```js
  let [a,[b,c]] = [1, [2, 3]]
```

è§£æ„çš„å¼ºå¤§ä¹‹å¤„, èµ‹å€¼çš„å³ä¾§å¯ä»¥æ˜¯ä»»ä½•å€¼
```js
  let [s, ...rest] = 'hello' // => s:h, rest:[e, l, l, o]

  let {r, g, b} = {r: 0, g: 2, b: 10}

  let {sin, cos, tan} = Math // é‡ Math ä¸­ç»“æ„éœ€è¦çš„æ–¹æ³•
```

å¯¹äºå¯¹è±¡ç»“æ„, ä¸€èˆ¬æƒ…å†µä¸‹å·¦ä¾§çš„å˜é‡åå°½é‡ä¸å·¦ä¾§å¯¹è±¡çš„å˜é‡åä¸€è‡´

ä½†è¿™ä¸æ˜¯å¿…é¡»çš„
```js
  let {cos: cosine} = Math // æ­¤æ—¶éœ€è¦ä½¿ç”¨ cosine å˜é‡
```

å¤æ‚ç»“æ„
```js
  let [{x: x1, y:y1}, {x: x2, y: y2}] = [{x: 1, y:2}, {x: 3, y: 4}] // æ•°ç»„åµŒå¥—å¯¹è±¡

  let {x:[x1, y1], y: [x2, y2]} = {x: [1, 2], y: [3, 4]} // å¯¹è±¡åµŒå¥—æ•°ç»„(å…³é”®æ˜¯è¿™ä¸ª)

  let {x: {data}} = {x: {data: 1}} // å¯¹è±¡åµŒå¥—å¯¹è±¡
```




 