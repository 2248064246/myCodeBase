# 文件权限

## 文件的权限说明

```shell
ls -l
# 结果如下
drwxrwxrwx 2 root   root   4096 6月  28 20:21 Bash
drwxr-xr-x 2 ggbone ggbone 4096 6月  29 09:51 Desktop
```

第一个字母描述文件类型:

| 类型 | 描述     |
| ---- | -------- |
| `-`  | 代表文件 |
| `d`  | 代表目录 |
| `l`  | 代表链接 |

后面跟着三组三字符的编码, 每一组定义了 3 种访问权限:

- r 代表可读
- w 代表可写
- x 代表可执行

> 其中 `-` 表示没有对应权限

这三组访问权限分别对应三种用户

- 文件创建者
- 创建者所属的组
- 系统其他用户

## 文件权限码

linux 中权限使用 8 进制数字表示

| 权限  | 二进制 | 八进制 | 描述               |
| ----- | ------ | ------ | ------------------ |
| `---` | 000    | 0      | 没有任何权限       |
| `--x` | 001    | 1      | 只有执行权限       |
| `-w-` | 010    | 2      | 只有写入权限       |
| `-wx` | 011    | 3      | 有写入和执行权限   |
| `r--` | 100    | 4      | 只有读取权限       |
| `r-x` | 101    | 5      | 只有读取和写入权限 |
| `rw-` | 110    | 6      | 有写入和读取权限   |
| `rwx` | 111    | 7      | 全部权限           |

### 关于 umask 命令

这个指令用来设置默认(新建文件)文件的权限

例如 `umask` 为 `0022` (这个是 Ubuntu 的默认值)

这里最终文件的权限是 `666 - 022 = 644`

对于文件而言是 `777 - 022 = 755` 也就是 `drwxr-xr-x`

## 改变权限

语法 `chmod options mode file`

`mode` 可以使用八进制或符号模式进行设置

```shell
# 给当前用户授予该文件所有权限
chmod  777 file
```

如果要给其他用户授予权限, 可以如下设置

```shell
chmod o+rwx file
```

`o` 表示其他用户, 对应的还有

`g` 表示当前用户组

`u` 表示当前用户

`a` 表示所有

通过 `+` 表示增加权限, 对应还有 `-` 去除后面指定的权限

如果需要修改整个目录的所有文件, 可以通过 `-R` 选择来实现

## 改变属主(创建者)

`chown` 用来改变文件的属主, `chgrp` 用来改变文件的默认属组

> 实际上 chown 也能够实现改变属组的功能

```shell
# 将file文件的属主改为root
chown root file
# 将file文件的属主改为root, 属组改为root组
chown root:root file
```

