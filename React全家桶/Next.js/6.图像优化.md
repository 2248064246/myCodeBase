# 图像优化

Next.js 的 Image 组件时 HTML 元素`img`的扩展. 它包含各种内中的性能优化.

Image 组件内置的一些优化包括:

- `改进的性能`: 始终使用现代图像格式为每个设备提供正确大小的图像
- `视觉稳定性`: 自动防止布局偏移(图像的对其问题???)
- `更快的页面加载`: 图像仅在进入视口时加载, 带有可选的模糊占位符
- `灵活性`: 按需调整图像大小.

## 使用 Image 组件

```js
import Image from 'next/image';
import profilePic from '../public/me.png';

function Home() {
  return (
    <>
      <h1>My Homepage</h1>
      <Image
        src={profilePic}
        alt='Picture of the author'
        // width={500} automatically provided
        // height={500} automatically provided
        // blurDataURL="data:..." automatically provided
        // placeholder="blur" // Optional blur-up while loading
      />
      <p>Welcome to my homepage!</p>
    </>
  );
}
```

### 远程图像

如果要使用远程图像, `src` 属性应该是一个 url 字符串.

由于 Next.js 在构建过程中无法访问远程文件, 因此现需要手动提供 `width` `height`

```js
import Image from 'next/image';

export default function Home() {
  return (
    <>
      <h1>My Homepage</h1>
      <Image
        src='/me.png'
        alt='Picture of the author'
        width={500}
        height={500}
      />
      <p>Welcome to my homepage!</p>
    </>
  );
}
```

### 指定域名

如果需要访问其他域的图片, 可以这么做: 在`next.config.js` 中配置`images`组件的域名

```js
module.exports = {
  images: {
    domains: ['example.com', 'example2.com'],
  },
};
```

### 优先事项

可以给页面中最大的图片设置 `priority` 属性, 表示这个图像是最重要的, Next 会进行一定的预加载优化

```js
import Image from 'next/image';

export default function Home() {
  return (
    <>
      <h1>My Homepage</h1>
      <Image
        src='/me.png'
        alt='Picture of the author'
        width={500}
        height={500}
        priority
      />
      <p>Welcome to my homepage!</p>
    </>
  );
}
```

## 图像尺寸

通过 `height` 和`width` 属性来指定图片大小.


如果不知道图像大小, 可以通过 `layout='fill'` 来让图像填充
