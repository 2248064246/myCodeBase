# HTML 中的图片

## img 标签

> 像`<img>`和`<video>`这样的元素有时被称之为替换元素，因为这样的元素的内容和尺寸由外部资源（像是一个图片或视频文件）所定义，而不是元素自身。

通过 img 的 src 属性先 html 中插入图片

如果这张图片存储在和 HTML 页面同路径的 images 文件夹下（这也是 Google 推荐的做法，利于 SEO/索引），那么你可以采用如下形式：

```html
<img src="images/xxx.jpg" />
```

> 注意：搜索引擎也读取图像的文件名并把它们计入 SEO。因此你应该给你的图片取一个描述性的文件名：dinosaur.jpg 比 img835.png 要好。

同样也可以使用绝对 url

```html
<img src="https://xxx.com/a.peg" />
```

> 这种方式是不被推荐的, 因为这会让浏览器做更多的事情: 例如重新的 DNS 解析, IP 寻址

大多数时候, 我们的图片和文档都是放在一起的.

> 大多数图片是有版权的, 除非你能确保所引用的图片是公共的. 在未得到授权, 将引用别人的图片, 这称为`盗链`, 这回占用别人的带宽, 而且降低你的网页速度.

**备选文本**

`alt` 属性, 它的值对应图片的文字描述. 在图片无法加载的时候, 会显示 alt 文本

这样做的好处:

1. 用户有视力障碍, 通过屏幕阅读器来浏览网页. 事实上，给图片一个备选的描述文本对大多数用户都是很有用的。
2. 在图片路径出错的情况下能够给与友好备用显示
3. 浏览器不支持图片情况下, 某些用户仍然在使用纯文本浏览器, 这些浏览器会把图片替换为文本
4. 提供一些文字描述给搜索引擎使用
5. 用户关闭图片显示已减少数据传输, 这在手机上十分普遍

**应该在 alt 中写些什么**

- 装饰：如果图片只是用于装饰，而不是内容的一部分，可以写一个空的 alt="" 。例如，屏幕阅读器不会浪费时间对用户读出不是核心需要的内容。实际上装饰性图片就不应该放在 HTML 文件里， CSS 背景图片才应该用于插入装饰图片，但如果这种情况无法避免， alt=""会是最佳处理方案。
- 内容：如果你的图片提供了重要的信息，就要在 alt 文本中简要的提供相同的信息，甚至更近一步，把这些信息写在主要的文本内容里，这样所有人都能看见。不要写冗余的备选文本（如果在主要文本中将所有的段落都重复两遍，对于没有失明的用户来说多烦啊！），如果在主要文本中已经对图片进行了充分的描述，写 alt=""就好。
- 链接: 如果你把图片嵌套在<a>标签里，来把图片变成链接，那你还必须提供无障碍的链接文本。在这种情况下，你可以写在同一个<a>元素里，或者写在图片的 alt 属性里，随你喜欢。
- 文本: 你不应该将文本放到图像里。例如，如果你的主标题需要有阴影，你可以用 CSS 来达到这个目的，而不是把文本放到图片里。如果真的必须这么做，那就把文本也放到 alt 里。

**宽度和高度**

给图片定义高度和宽度, 而不是让图片自动适应是一个好主意.在图片没有完全加载的时候, 也能有一个占位空间

**image title 图片标题**

图片标题并不必须要包含有意义的信息，通常来说，将这样的支持信息放到主要文本中而不是附着于图片会更好。不过，在有些环境中这样做更有用，比如当没有空间显示提示时，也就是在图片栏中。

当然, title 有有它自身问题, 主要是基于这样一个事实，即屏幕阅读器的支持是不可预测的，大多数浏览器都不会显示它，除非您在鼠标悬停时. 具体如何做, 取决于你的需求

## figure

这个元素的作用是: 给是图片搭配说明文字来解说图片(提供更好的语义)

```html
<figure>
  <img
    src="https://raw.githubusercontent.com/mdn/learning-area/master/html/multimedia-and-embedding/images-in-html/dinosaur_small.jpg"
    alt="一只恐龙头部和躯干的骨架，它有一个巨大的头，长着锋利的牙齿。"
    width="400"
    height="341"
  />
  <figcaption>曼彻斯特大学博物馆展出的一只霸王龙的化石</figcaption>
</figure>
```

> 注意：从无障碍的角度来说，说明文字和 alt 文本扮演着不同的角色。看得见图片的人们同样可以受益于说明文字，而 alt 文字只有在图片无法显示时才这样。 所以，说明文字和 alt 的内容不应该一样，因为当图片无法显示时，它们会同时出现。尝试让你的图片不显示，看看效果如何。

注意 `figure`里不一定要是一张图片, 它可以是几张图片, 一段代码, 音视频等等

## CSS 背景图片

也可以使用 css 将图片嵌入网站中. 这种方法可以更好的控制图片的位置和大小. **但是完全丧失了图片的语义, 不能有任何备选文本, 也不能被屏幕阅读器识别.**

> 如果图像对你的内容有意义, 则应该使用 HTML 图像, 如果图片是纯粹的装饰, 则应该使用 css 背景图片

## 启用了 CORS 的图片

HTML 规范中图片有一个 crossorigin 属性，结合合适的 CORS 响应头，就可以实现在画布中使用跨域 `<img>` 元素的图像，就像在原生 `<canvas>` 中使用一样。

### 安全性和"被污染"的 canvas

由于在 `<canvas> `位图中的像素可能来自多种来源，包括从其他主机检索的图像或视频，因此不可避免的会出现安全问题。

尽管不通过 CORS 就可以在 `<canvas>` 中使用其他来源的图片，但是这会污染画布，并且不再认为是安全的画布，这将可能在 `<canvas>` 检索数据过程中引发异常。

如果从外部引入的 HTML `<img>` 或 SVG `<svg>` ，并且图像源不符合规则，将会被阻止从 <canvas> 中读取数据。

在"被污染"的画布中调用以下方法将会抛出安全错误：

- 在 `<canvas>` 的上下文上调用 getImageData()
- 在 `<canvas> `上调用 toBlob()
- 在 `<canvas>` 上调用 toDataURL()

这种机制可以避免未经许可拉取远程网站信息而导致的用户隐私泄露。

`crossorigin`

- anonymous 允许任何
- use-credentials
  - Request uses CORS headers, credentials flag is set to 'include' and **user credentials** are always included.
