# 探查和结束进程

## ps 命令

ps 命令有很多, 而且有多种风格

主要介绍常用的重要命令

| 命令      | 描述                 |
| --------- | -------------------- |
| -e        | 显示所有进程         |
| -l        | 显示长列表           |
| -j        | 显示任务信息         |
| -f        | 显示完整格式的输出   |
| -u [name] | 查询指定用户下的进程 |

ps 最常用的命令
```shell
# 查找列表结果中含有指定关键字的进程
ps -ef | grep 进程关键字
```

###

-f 显示的列表

| 名称  | 说明                                         |
| ----- | -------------------------------------------- |
| UID   | 用户名称(这里显示的是用户名称, 在 deepin 中) |
| PID   | 进程 ID                                      |
| PPID  | 父进程 ID                                    |
| C     | 进程 cpu 利用率                              |
| STIME | 进程启动时的系统时间                         |
| CMD   | 启动的程序名称                               |

###

-l 显示列表

| 名称 | 说明                                                 |
| ---- | ---------------------------------------------------- |
| F    | 内核分配给进程的系统标记                             |
| S    | 进程状态(O: 正在运行; S: 休眠; R: 可运行; T: 停止; ) |
| PRI  | 进程优先级 (**越小优先级越高**)                      |

其他显示和 -f 相同


## 结束进程

### kill 命令
+ 1 (HUP)：重新加载进程。
+ 9 (KILL)：杀死一个进程。
+ 15 (TERM)：正常停止一个进程。

常用 kill 命令

```shell
# 杀死一个进程
kill PID 

# 重载一个进程
kill -HUP PID

# 彻底杀死一个进程
kill -9 PID

# 杀死这个用户下的所有进程 
kill -u hnlinux  

# 还可以这么写
kill -9 $(ps -ef | grep hnlinux)
```

### killall 命令

killall 命令支持通过进程名称来杀死进程

```shell
# 杀死所有已 http 开头的进程
killall http* 
```

## 端口查询

**安装**

```shell
apt install net-tools
```

`netstat 命令` 

-t – 显示 TCP 端口。
-u – 显示 UDP 端口。
-n – 显示数字地址而不是主机名。
-l – 仅显示侦听端口。
-p – 显示进程的 PID 和名称
-a - 显示所有链接和监听端口

配合 grep 过滤

`netstat -tnlp | grep :80`


命令使用举例:

netstat -anp：显示系统端口使用情况
netstat -nupl：UDP类型的端口
netstat -ntpl：TCP类型的端口
netstat -na|grep ESTABLISHED|wc -l：统计已连接上的，状态为"established"
netstat -l：只显示所有监听端口
netstat -lt：只显示所有监听tcp端口

