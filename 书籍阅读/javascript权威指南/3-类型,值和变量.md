
# ç±»å‹, å€¼ å’Œå˜é‡

## æ•°å€¼

JS ä½¿ç”¨ IEEE 754 æ ‡å‡†å®šä¹‰ 64 ä½æµ®ç‚¹æ ¼å¼è¡¨ç¤ºæ•°å€¼ (åœ¨è¡¨ç¤ºæµ®ç‚¹æ•°çš„æ—¶å€™ä¼šæœ‰é—®é¢˜)

### æŒ‡æ•°è®¡æ•°æ³•

```js
1.4E2 // => 142

```

### æ•°å­—å­—é¢é‡ä¸­çš„åˆ†éš”ç¬¦

åœ¨ ES2020 ä¹‹å, å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿å°†æ•°å­—å­—é¢é‡åˆ†éš”ä¸ºæ›´å®¹æ˜“çœ‹æ¸…çš„æ•°å­—æ®µ

```js
let num = 1_000_000_001 // => 1000000001
let num2 = 1_1_1_01 // => 11101

```

### ç®—æœ¯

JS ä¸­çš„ç®—æœ¯é‡åˆ° ä¸Šæº¢å‡º, ä¸‹æº¢å‡º, é™¤ä»¥0 æ—¶, ä¸ä¼šå‘ç”Ÿé”™è¯¯

åœ¨æ•°å€¼è¶…è¿‡æœ€å¤§å¯è¡¨ç¤ºæ•°æ—¶, ç»“æœæ˜¯ä¸€ä¸ª `Infinity` æ— ç©·å€¼

åŒæ ·, å¦‚æœæ˜¯ä¸ªè´Ÿå€¼, ç»“æœæ˜¯ `-Infinity`

JS ä¸­ ä¸‹æº¢å‡ºä¼šè¡¨ç¤ºä¸º 0, æˆ–è€…`-0`

### äºŒè¿›åˆ¶æµ®ç‚¹æ•°ä¸èˆå…¥é”™è¯¯

IEEE 754 æ˜¯ä¸€ç§äºŒè¿›åˆ¶è¡¨ç¤ºæ³•, å¯ä»¥ç²¾ç¡®è¡¨ç¤º 1/2, 1/8 è¿™ç§åˆ†æ•°

æ— æ³•å‡†ç¡®è¡¨ç¤ºåè¿›åˆ¶åˆ†æ•°(ä¾‹å¦‚: 0.1)

### é€šè¿‡ BigInt è¡¨ç¤ºä»»æ„ç²¾åº¦æ•´æ•°

ES2020 å®šä¹‰çš„æ–°æ•°æ®ç±»å‹

ä¸»è¦ä¸ºäº†è¡¨ç¤º 64ä½æ•´æ•°(ä¸é€‚åˆåŠ å¯†, æ²¡æœ‰è€ƒè™‘é˜²æ­¢æ—¶åºæ”»å‡»??)

+ æ—¶åºæ”»å‡»
  `æŸä¸ªå‡½æ•°è´Ÿè´£æ¯”è¾ƒç”¨æˆ·è¾“å…¥çš„å¯†ç å’Œå­˜æ”¾åœ¨ç³»ç»Ÿå†…å¯†ç æ˜¯å¦ç›¸åŒï¼Œå¦‚æœè¯¥å‡½æ•°æ˜¯ä»ç¬¬ä¸€ä½å¼€å§‹æ¯”è¾ƒï¼Œå‘ç°ä¸åŒå°±ç«‹å³è¿”å›ï¼Œé‚£ä¹ˆé€šè¿‡è®¡ç®—è¿”å›çš„é€Ÿåº¦å°±çŸ¥é“äº†å¤§æ¦‚æ˜¯å“ªä¸€ä½å¼€å§‹ä¸åŒçš„`

```js
1234n
0b11110n // => äºŒè¿›åˆ¶BigInt => 30n
0o777n // => 8è¿›åˆ¶BigInt => 511n
0xabn // => 16è¿›åˆ¶BigInt => 171n
```

## æ–‡æœ¬

å­—ç¬¦ä¸²æ˜¯16ä½å€¼çš„ä¸å¯ä¿®æ”¹çš„æœ‰åºåºåˆ—, æ¯ä¸ªå€¼éƒ½è¡¨ç¤ºä¸€ä¸ª Unicode å­—ç¬¦, length åŒ…å«çš„16ä½å€¼çš„ä¸ªæ•°

### å­—ç¬¦, ç ç‚¹å’Œ JSå­—ç¬¦ä¸²

JS ä½¿ç”¨çš„ Unicode ä½¿ç”¨çš„æ˜¯ UTF-16 ç¼–ç çš„

æœ€å¸¸ç”¨çš„ Unicode å­—ç¬¦çš„ç ç‚¹æ˜¯16ä½çš„, å¦‚æœè¶…å‡º16ä½, åˆ™ç¼–ç ä¸ºä¸¤ä¸ª16ä½åºåˆ—

**æ„å‘³ç€, å­˜åœ¨ä¸€ä¸ªé•¿åº¦ä¸º2çš„å­—ç¬¦ä¸², ä½†æ˜¯åªæ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦**

```js
let c = 'â¤ï¸ğŸ˜‚' // c.length == 4

// jså­—ç¬¦ä¸²æ“ä½œæ–¹æ³•ä¸€èˆ¬æ˜¯æ“ä½œ 16ä½å€¼, è€Œä¸æ˜¯å­—ç¬¦
c[0]  // "â¤"
c[1] // ''

// ES6 ä»¥å, å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è¿­ä»£, ä½¿ç”¨ for/of æˆ–è€… ...æ“ä½œç¬¦, è¿­ä»£çš„æ˜¯å­—ç¬¦, è€Œä¸æ˜¯16ä½å€¼ (è¿™å¥è¯æœ‰ç‚¹ä¸å¤§é€‚ç”¨, æœ‰é—®é¢˜å•Š...)

for(const value of c) {
  console.log(value) // => 'â¤', '', 'ğŸ˜‚'
}
```

å¦‚ä½•åªé€šè¿‡å­—ç¬¦æ¥åˆ¤æ–­è¡¨æƒ…å­—ç¬¦é•¿åº¦?? (ä¸€ç§æ–¹æ³•æ˜¯, å°†å­—ç¬¦å­˜å…¥æ•°ç»„, ä½†æ˜¯å…³é”®ç‚¹åœ¨äºå¦‚ä½•æ­£ç¡®æˆªå–åˆ°å­—ç¬¦)

```js
let rsAstralRange = '\\ud800-\\udfff',
  rsZWJ = '\\u200d',
  rsVarRange = '\\ufe0e\\ufe0f',
  rsComboMarksRange = '\\u0300-\\u036f',
  reComboHalfMarksRange = '\\ufe20-\\ufe2f',
  rsComboSymbolsRange = '\\u20d0-\\u20ff',
  rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;
let reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange + rsComboRange + rsVarRange + ']');

let rsFitz = '\\ud83c[\\udffb-\\udfff]',
  rsOptVar = '[' + rsVarRange + ']?',
  rsCombo = '[' + rsComboRange + ']',
  rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',
  reOptMod = rsModifier + '?',
  rsAstral = '[' + rsAstralRange + ']',
  rsNonAstral = '[^' + rsAstralRange + ']',
  rsRegional = '(?:\\ud83c[\\udde6-\\uddff]){2}',
  rsSurrPair = '[\\ud800-\\udbff][\\udc00-\\udfff]',
  rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',
  rsSeq = rsOptVar + reOptMod + rsOptJoin,
  rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';
let reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');

function toArray(val) { // å­—ç¬¦ä¸²è½¬æˆæ•°ç»„
  return hasUnicode(val) ?
    unicodeToArray(val) :
    asciiToArray(val);
}

function hasUnicode(val) {
  return reHasUnicode.test(val);
}

function unicodeToArray(val) {
  return val.match(reUnicode) || [];
}

function asciiToArray(val) {
  return val.split('');
}
```





