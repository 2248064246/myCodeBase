# 组件中的 v-model

Vue3 组件中的 v-model 等同如下

```html
<CustomInput v-model="modelValue"></CustomInput>

<CustomInput
  :modelValue="searchText"
  @update:modelValue="newValue => searchText = newValue"
/>
```

需要在组件中显示触发`$emit('update:modelValue')`

> 这就是 Vue2 v-bind 的.sync 修饰符

Vue2 .sync

```HTML
 <xx :value.sync="title"></xx>

 this.$emit('update:value', newValue) // 需要在组件内部显示触
```

Vue2 中 v-model 默认绑定的是 `value`属性, 通过`input`事件更新值

## v-model 参数

默认情况下, v-model 在组件上使用的都是`modelValue`作为 prop, 并以`update:modelValue`作为对应的事件. 我们通过给 `v-model` 指定一个参数来更改这些名字

```js
<MyComponent v-model:title='bookTitle' />
```

此时组件中 props 需要以`title`来接收, 事件需要`update:title`来对应

```html
<!-- MyComponent.vue -->
<script>
  export default {
    props: ['title'],
    emits: ['update:title'],
  };
</script>

<template>
  <input
    type="text"
    :value="title"
    @input="$emit('update:title', $event.target.value)"
  />
</template>
```

## 多个 v-model 绑定

可以一个组件上绑定多个 `v-model`, 需要指定不同的参数

## 处理 v-model 修饰符

除了 `.lazy` `.number` `.trim` 这几个修饰符, 还可以自定义修饰符

```html
<MyComponent v-model.capitalize="myText" />
```

需要在组件中声明`modelModifiers` props, 默认值需要设置为一个空对象

> 这个 props 的名称由 `arg + Modifiers` 组成, arg 就是v-model参数

```js
<script>
export default {
  props: {
    modelValue: String,
    modelModifiers: {
      default: () => ({})
    }
  },
  emits: ['update:modelValue'],
  created() {
    /* 注意这里的 modelModifiers的值 */
    console.log(this.modelModifiers) // { capitalize: true }
  }
}
</script>

<template>
  <input
    type="text"
    :value="modelValue"
    @input="$emit('update:modelValue', $event.target.value)"
  />
</template>

```
