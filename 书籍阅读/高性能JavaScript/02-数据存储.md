
# 数据存储

函数内部属性 `[[Scope]] ` 包含了一个函数被创建的作用域中对象的集合, 这个集合被称为函数的作用域链


当函数被创建的时候, 它的作用域链中插入了一个对象变量, 这个变量代表着所有在全局范围内定义的变量(例如: `window`, `navigator`...)

函数执行的时候, 会创建一个 `执行环境`(也被称为`执行上下文`), 函数每次执行时的执行环境都一样, 当函数执行完毕, `执行环境`也会被销毁

当执行环境被创建的时候, 它的作用域链初始化为当前运行的 `[[Scope]]` 属性中的对象, 这些值按照他们出现在函数中的顺序被复制到执行环境的作用域链中

上述过程完成, 一个被称为 `活动对象`的新对象就为执行环境创建好了

活动对象作为函数运行时的`变量对象`, 包含了所有`局部变量`, `命名参数`, `参数集合`以及`this`, 然后此对象被推入作用域链的最前端

当执行环境被销毁时, 活动对象也随之销毁


## 闭包

闭包会引用函数作用域中的`活动对象`, 所以可以通过闭包方位函数中的变量

在函数执行完成, 由于闭包中引用了`活动对象`, 所以在函数执行环境销毁的时候, 并无法销毁活动对象


## 优化项

1. 访问局部变量比访问跨作用域变量更快
2. 变量在作用域中越深, 访问时间越长
3. 访问全局变量最慢

总是推荐的做法是, 如果跨作用域, 全局变量被访问多次, 那么把他们放到一个局部变量中